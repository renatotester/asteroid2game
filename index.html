<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no"/>
  <title>ASTRO OPS ‚Äî V2.2 (mobile)</title>
  <link rel="stylesheet" href="style-v2.css?v=5"/>
  <style>#game{min-height:560px;display:block}</style>
</head>
<body>
  <div id="wrap" class="wrap">
    <header class="hud">
      <div>Score: <b id="score">0</b></div>
      <div>Level: <b id="level">1</b></div>
      <div>Hi: <b id="hi">0</b></div>
      <button id="btnFS" title="Tela cheia (F)">‚õ∂</button>
    </header>

    <!-- Canvas do jogo -->
    <canvas id="game" tabindex="0" aria-label="Campo de jogo" class="gameCanvas" touch-action="none"></canvas>

    <footer class="help">
      ‚Üê ‚Üí girar ‚Ä¢ ‚Üë acelerar ‚Ä¢ Espa√ßo atirar ‚Ä¢ P pausa ‚Ä¢ R reiniciar ‚Ä¢ F tela cheia
    </footer>

    <!-- Overlay inicial / pausa / game over -->
    <div id="overlay" class="overlay">
      <div class="card">
        <h2>ASTRO OPS ‚Äî V2.2 (mobile)</h2>
        <p id="ovMsg">Pressione <b>Espa√ßo</b>, <b>Enter</b>, <b>Clique</b> ou <b>Toque</b> para come√ßar</p>
        <div class="stats">
          <div>Score: <b id="ovScore">0</b></div>
          <div>Hi: <b id="ovHi">0</b></div>
          <div>Level: <b id="ovLevel">1</b></div>
        </div>
        <p class="mini"><button id="startBtn" class="primary">COME√áAR</button></p>
        <p id="bootErr" class="mini" style="display:none;color:#ffb3b3"></p>
      </div>
    </div>

    <!-- Controles touch (somem no desktop largo) -->
    <div class="touchUI" aria-hidden="false">
      <div class="leftPad">
        <button class="tbtn" id="btnLeft"  aria-label="Girar para a esquerda">‚ü≤</button>
        <button class="tbtn" id="btnRight" aria-label="Girar para a direita">‚ü≥</button>
        <button class="tbtn wide" id="btnThrust" aria-label="Acelerar">‚ñ≤</button>
      </div>
      <div class="rightPad">
        <button class="tbtn big"  id="btnFire"  aria-label="Atirar">üî•</button>
        <button class="tbtn small" id="btnPause" aria-label="Pausar/Retomar">‚èØ</button>
      </div>
    </div>
  </div>

  <!-- Mostra erros de boot na tela -->
  <script>
    addEventListener('error',(e)=>{
      const el=document.getElementById('bootErr');
      if(el){ el.style.display='block'; el.textContent='Erro de inicializa√ß√£o: '+(e.message||e.error||''); }
    }, {capture:true});
  </script>

  <!-- Apenas este script (ESM). Remova scripts antigos. -->
  <script type="module" src="main-v2.js?v=5"></script>
</body>
</html>

